<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="acesso.css" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
    />
  </head>

  <body>
    <nav class="navbar">
      <div class="navbar__container">
        <a href="index.html" id="navbar__logo">Jazz/Music</a>

        <ul class="navbar__menu">
          <li class="navbar__item">
            <a href="index.html" class="navbar__links" id="home-page">Incio</a>
          </li>

          <li class="navbar__item">
            <a href="#servicos" class="navbar__links" id="about-page"
              >o que é jazz?</a
            >
          </li>
          <li class="navbar__item">
            <a href="#div_nosso_site" class="navbar__links" id="services-page"
              >Serviços</a
            >
          </li>

          <li class="navbar__btn">
            <a href="#sign-up" class="button" id="signup">cadastro</a>
          </li>
          <span class="span_traco"> ||</span>
          <li class="navbar__btn">
            <a href="login.html" class="button" id="signin">login</a>
          </li>
        </ul>
      </div>
    </nav>
    <!---->

    <div class="div-h1">
      <h1 class="h1-j">J</h1>
      <br />
      <h1 class="h1-a">A</h1>
      <br />
      <h1 class="h1-z">Z</h1>
      <br />
      <h1 class="h1-z2">Z</h1>
    </div>
    <div class="div_form">
      <h1>Crie sua conta</h1>
      <div class="social-media">
        <ul class="list-social-media">
          <a class="link-social-media" href="#">
            <li class="item-social-media">
              <i class="fab fa-facebook-f"></i>
            </li>
          </a>
          <a class="link-social-media" href="#">
            <li class="item-social-media">
              <i class="fab fa-google-plus-g"></i>
            </li>
          </a>
          <a class="link-social-media" href="#">
            <li class="item-social-media">
              <i class="fab fa-linkedin-in"></i>
            </li>
          </a>
        </ul>
        <p>ou use seu email para registro</p>
      </div>
      <div>
        <div class="traco-direita"></div>
        <div class="traco-esquerda"></div>
        <span class="span_nome" maxlength="40"> Nome</span>
        <br />
        <input type="text" id="inp_nome" />
        <br />
        <span>Email</span>
        <br />
        <input maxlength="40" type="text" id="inp_email" />
        <br />

        <span>Senha</span>
        <br />
        <input type="password" id="inp_senha" />
        <br />
        <span>Confirmar senha</span>
        <br />
        <input type="password" id="inp_confirmar" />
        <br />
        <div id="div_msg"></div>
        <button class="button1" onclick="cadastrar()">cadastrar</button>
      </div>
      <div class="div_img">
        <img src="./WhatsApp Image 2021-11-15 at 17.48.20 (1).jpeg" alt="" />
      </div>
    </div>
  </body>
</html>
<script>
  function cadastrar() {
    var nomeVar = inp_nome.value;
    var emailVar = inp_email.value;
    var senhaVar = inp_senha.value;
    var confirmacaoSenhaVar = inp_confirmar.value;

    if (senhaVar == '' || emailVar == '' || nomeVar == '' || confirmacaoSenhaVar == '' ) {
    if (senhaVar == confirmacaoSenhaVar) {
      if (emailVar.indexOf("@") > -1) {
        if (emailVar.indexOf(".com") > -1) {
          fetch("/usuarios/cadastrar", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              nome: nomeVar,
              email: emailVar,
              senha: senhaVar,
            }),
          })
            .then(function (resposta) {
              console.log("resposta: ", resposta);

              if (resposta.ok) {
                window.alert("Cadastro realizado com sucesso!");
                window.location = "login.html";
                finalizarAguardar();
              } else {
                throw "Houve um erro ao tentar realizar o cadastro!";
              }
            })
            .catch(function (resposta) {
              console.log(`#ERRO: ${resposta}`);
            });
            fetch("/usuarios/cadastrar2", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              nome: nomeVar,
              email: emailVar,
              senha: senhaVar,
            }),
          })
            .then(function (resposta) {
              console.log("resposta: ", resposta);

              if (resposta.ok) {
                window.alert("Cadastro realizado com sucesso!");
                window.location = "login.html";
                finalizarAguardar();
              } else {
                throw "Houve um erro ao tentar realizar o cadastro!";
              }
            })
            .catch(function (resposta) {
              console.log(`#ERRO: ${resposta}`);
            });
        } else {
          

          div_msg.innerHTML = `<span  style="color: red;">Senhas não correspondentes</span>`;
      document.getElementById("inp_email").style.border = "1px solid red";
      
        }
      } else {
        alert ("os campos precisam ser preenchidos ")
    document.getElementById("inp_email").style.border = "1px solid red";
      document.getElementById("inp_confirmar").style.border = "1px solid red";
      document.getElementById("inp_senha").style.border = "1px solid red";
      document.getElementById("inp_nome").style.border = "1px solid red";
      
      }
    } else {
      div_msg.innerHTML = `<span  style="color: red;">email inválido</span>`;
      document.getElementById("inp_email").style.border = "1px solid red";

      
     
    }
  } else {
    div_msg.innerHTML = `<span  style="color: red;">Senhas não correspondentes</span>`;
    document.getElementById("inp_senha").style.border = "1px solid red";
      document.getElementById("inp_confirmar").style.border = "1px solid red";
      
    
  }
  }
</script>
